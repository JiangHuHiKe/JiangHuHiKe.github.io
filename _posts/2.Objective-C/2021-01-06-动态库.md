---
layout: post
title: "动态库"
date: 2021-01-06
tag: Objective-C
---


## 目录
- [待整理](#content1)   


 
<!-- ************************************************ -->
## <a id="content1">待整理</a>

```
0401 dead strip


echo "-----开始test.o to test EXEC"
clang -target x86_64-apple-macos11.1 \
-fobjc-arc \
-isysroot $SYSROOT \
-Xlinker -all_load \
-Xlinker -dead_strip \
-Xlinker -why_live -Xlinker _global_function \
-L./StaticLibrary \
-lTestExample \
${FILE_NAME}.o -o ${FILE_NAME}


# -dead_strip 官方解释:删除入口点或导出符号无法访问的函数和数据。
Remove functions and data that are unreachable by the entry point or exported symbols.



/**
 情形一:
 -dead_strip 关闭
 global_function:有
 static_function:无

 -dead_strip 打开
 global_function:无
 static_function:无
 */
// 本地
static void static_function() {
    NSLog(@"staticFunction");
}
// 全局
void global_function() {
    NSLog(@"globalFunction");
}
// 入口点
int main(){
    NSLog(@"testApp----");
    return 0;
}



/**
 情形二
 -dead_strip 关闭
 static_function:有
 global_function:有

 
 -dead_strip 打开
 static_function:无
 global_function:无
 */
// 本地
static void static_function() {
    NSLog(@"staticFunction");
}
// 全局
void global_function() {
    NSLog(@"globalFunction");
    static_function();
}
// 入口点
int main(){
    NSLog(@"testApp----");
    return 0;
}




/**
 情形三
 -dead_strip 关闭
 static_function:有
 global_function:有
 global_function2:有

 
 -dead_strip 打开
 static_function:无
 global_function:无
 global_function2:无
 */
// 本地
static void static_function() {
    NSLog(@"staticFunction");
}
// 全局
void global_function() {
    NSLog(@"globalFunction");
    static_function();
}
// 全局2
void global_function2() {
    NSLog(@"globalFunction2");
    global_function();
}

// 入口点
int main(){
    NSLog(@"testApp----");
    return 0;
}


lldb 执行 test可执行文件

└> lldb -file test
(lldb) target create "test"
Current executable set to '/Users/lixiaoyi13/LCFiles/2Content/3Learning/动态库/上课代码/dead strip/test' (x86_64).
(lldb) r
```




----------
>  行者常至，为者常成！


