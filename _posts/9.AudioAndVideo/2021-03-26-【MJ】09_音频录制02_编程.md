---
layout: post
title: "【MJ】09_音频录制02_编程"
date: 2021-03-26
description: ""
tag: 音视频
---


[参考:【秒懂音视频开发】09_音频录制02_编程](https://www.cnblogs.com/mjios/p/14581738.html)

<span style="font-weight:bold;color:red;">本文是上面文章的摘要,只用于自己快速浏览.</span>


## 目录

* [通过编程录音](#content1)
* [多线程](#content2)






<!-- ************************************************ -->
## <a id="content1"></a>通过编程录音


**1. 开发录音功能的主要步骤是：**

1.注册设备     
avdevice_register_all();

2.获取输入格式对象      
av_find_input_format      

3.打开设备     
avformat_open_input

4.采集数据    
av_read_frame

5.释放资源     
avformat_close_input

**2. 从上下文中可以获取录音设备的相关参数**




<!-- ************************************************ -->
## <a id="content2"></a>多线程

录音属于耗时操作，为了避免阻塞主线程，最好在子线程中进行录音操作。这里创建了一个继承自QThread的线程类，线程一旦启动（start），就会自动调用run函数。

<span style="color:red;font-weight:bold">存在问题:程序启动控制台会打印 35错误</span>



----------
>  行者常至，为者常成！


