---
layout: post
title: "13、分支开发工作流"
date: 2013-06-13
tag: Git
---   

- [参考：玩转Git三剑客](https://time.geekbang.org/course/intro/100021601)



## 目录
* [长期分支](#content1)
* [主题分支](#content2)


<!-- ************************************************ -->
## <a id="content1"></a>长期分支

因为 Git 使用简单的三方合并，所以就算在一段较长的时间内，反复把一个分支合并入另一个分支，也不是什么难事。

在整个项目开发周期的不同阶段，你可以同时拥有多个开放的分支；你可以定期地把某些主题分支合并入其他分支中。

许多使用 Git 的开发者都喜欢使用这种方式来工作，比如只在 master 分支上保留完全稳定的代码——有可能仅仅是已经发布或即将发布的代码。      
他们还有一些名为 develop 或者 next 的平行分支，被用来做后续开发或者测试稳定性——这些分支不必保持绝对稳定，但是一旦达到稳定状态，它们就可以被合并入 master 分支了。

<img src="/images/Git/git13_0.png" alt="img">

通常把他们想象成流水线（work silos）可能更好理解一点，那些经过测试考验的提交会被遴选到更加稳定的流水线上去。

<img src="/images/Git/git13_1.png" alt="img">



<!-- ************************************************ -->
## <a id="content2"></a>主题分支

主题分支是一种短期分支，它被用来实现单一特性或其相关工作。

你在主题分支中提交了一些更新，并且在它们合并入主干分支之后，你又删除了它们。    
这项技术能使你快速并且完整地进行上下文切换（context-switch）——因为你的工作被分散到不同的流水线中，在不同的流水线中每个分支都仅与其目标特性相关，   
因此，在做代码审查之类的工作的时候就能更加容易地看出你做了哪些改动。     
你可以把做出的改动在主题分支中保留几分钟、几天甚至几个月，等它们成熟之后再合并，而不用在乎它们建立的顺序或工作进度。    

考虑这样一个例子，你在 master 分支上工作到 C1，这时为了解决一个问题而新建 iss91 分支，在 iss91 分支上工作到 C4，然而对于那个问题你又有了新的想法，于是你再新建一个 iss91v2 分支试图用另一种方法解决那个问题，接着你回到 master 分支工作了一会儿，你又冒出了一个不太确定的想法，你便在 C10 的时候新建一个 dumbidea 分支，并在上面做些实验。 你的提交历史看起来像下面这个样子：

<img src="/images/Git/git13_2.png" alt="img">

拥有多个主题分支的提交历史       
现在，我们假设两件事情：你决定使用第二个方案来解决那个问题，即使用在 iss91v2 分支中方案。 另外，你将 dumbidea 分支拿给你的同事看过之后，结果发现这是个惊人之举。 这时你可以抛弃 iss91 分支（即丢弃 C5 和 C6 提交），然后把另外两个分支合并入主干分支。 最终你的提交历史看起来像下面这个样子：      

<img src="/images/Git/git13_3.png" alt="img">





----------
>  行者常至，为者常成！



