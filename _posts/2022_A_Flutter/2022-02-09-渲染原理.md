---
layout: post
title: "9 渲染原理"
date: 2022-02-09
tag: Flutter
---


## 目录
- [三棵树](#content1) 




<!-- ************************************************ -->
## <a id="content1">三棵树</a>

widget树不稳定，每次build都会重新创建widget树。    
并不是所有的Widget树都会被独立渲染！只有继承RenderObjectWidget的才会创建RenderObject对象。     
在Flutter渲染的流程中，有三棵重要的树，Flutter引擎是针对Render树进行渲染。 

<span style="color:red;font-weight:bold;">Widget树，Element树，Render树</span>   

#### **一、Widget类型**

```dart

StatelessWidget extends Widget

StatefulWidget extends Widget

RenderObjectWidget extends Widget
```




#### **二、Element类型**

每一个Widget内部都会通过隐式调用createElement方法创建一个Element对象     

Element对象有三种：    

```dart
StatelessElement createElement() => StatelessElement(this);

StatefulElement createElement() => StatefulElement(this);

RenderObjectElement createElement();
```

<span style="color:red;font-weight:bold;">重要</span>     
1、element内部保存一个widget变量，Element树记录哪些widget发生了变化    
2、widget/state通过回调的方式拿到element对象，而不是拥有element属性，否则循环引用了  
3、build方法就是这个回调方法，参数context就是element对象           


#### **三、RenderObject**    

并不是所有的widget都会独立渲染，只有继承了RenderObjectWidget的widget才会创建RenderObject对象      
RenderObjectWidget他会实现一个比较关键的方法

```dart
RenderObject createRenderObject(BuildContext context);
```





----------
>  行者常至，为者常成！


