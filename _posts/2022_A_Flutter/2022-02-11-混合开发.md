---
layout: post
title: "11 混合开发"
date: 2022-02-11
tag: Flutter
---


## 目录
- [介绍](#content1) 
- [GlobalKey](#content2) 



<!-- ************************************************ -->
## <a id="content1">介绍</a>

**一、混合开发** 

Flutter项目调用原生的某些功能

原生项目里面包含Flutter模块

FlutterViewController 创建再销毁之后会有8M的内存泄露    
所以Flutter与原生页面之前不适合来回切换,FlutterViewController应该常驻内存     


让flutter给原生传递数据，原生应该提供一个方法让flutter来调用，通过方法的参数把数据传过来    
原生调用flutter也是同样的道理     

Flutter调用原生   
```js
// flutter 侧代码
MethodChannel _methodChannel = MethodChannel('mine_page');
_methodChannel.invokeMapMethod('picture', {"param1":"hehe","param2":10});

//iOS侧代码
FlutterViewController *vc = (FlutterViewController*)self.window.rootViewController;
self.methodChannel = [FlutterMethodChannel methodChannelWithName:@"mine_page" binaryMessenger:vc];

[self.methodChannel setMethodCallHandler:^(FlutterMethodCall * _Nonnull call, FlutterResult  _Nonnull result) {
    if ([call.method isEqualToString:@"picture"]) {
      //如果有返回值，通过result将返回值传递会flutter
      result(xxx)
    }
}];
```


----------
>  行者常至，为者常成！


