---
layout: post
title: 编译原理_什么是编译
date: 2011-06-01
tag: 计算机基础
---

## 目录
- [什么是编译](#content1)
- [词法分析](#content2)



## <a id="content1">什么是编译</a>

#### **一、语言及编译**   
编译：将高级语言(源语言) 翻译成 汇编语言或机器语言(目标语言) 的过程    

```text
高级语言          x = 2
                  |
                  |   编译(Compiling)
                  ↓
汇编语言         MOV X, 2
                  |
                  |   汇编（Assembling）
                  ↓
机器语言      C706 0000 0002
```

#### **二、编译过程**     
```text
                源程序
                  |
                  |   预处理器(Preprocessor)
                  ↓
           经过预处理的源程序
                  |
                  |   编译器（Compiler）
                  ↓
              汇编语言程序
                  |
                  |   汇编器（Assembler）
                  ↓
            可重定位的机器代码
                  |
                  |   链接器（Linker）/ 加载器（Loader）
                  ↓
              目标机器代码
```

**预处理器(Preprocessor)**     
把存储在不同文件中的源程序聚合在一起。     
把被称为宏的缩写语句转换为原始语句。      

**可重定位机器代码**     
可重定位(Relocatable):在内存中存放的起始位置L不是固定的。

**加载器（Loader）**    
修改可重定位地址，将修改后的指令和数据放到内存中适当的位置       

**链接器（Linker）**    
将多个可重定位的机器 代码文件（包括库文件） 连接到一起   
解决外部内存地址问题       


**目标机器代码**   
起始位置 +相对地址=绝对地址       

#### **三、编译系统结构**     

```text
                   -------------------------------
                   |       字符流                 |
                   |        |                    |
                   |        |   词法分析起         |
                   |        ↓                    |
                   |     词法单元流                |
                   |         |                   |
                   |         |   语法分析器        |
                   |         ↓                    |
分析部分            |       语法树                  |
前端（front end）   |         |                    |
与源语言相关         |         |   语义分析器         |
                   |         ↓                     |
                   |       语法树                   |
                   |         |                     |
                   |         |   中间代码生成器      |
                   |         ↓                     |
                   |     中间表示形式                |
                   |          |                    |
                   -----------|--------------------                               |
                              | 机器无关代码优化器
                              ↓
                         中间表示形式
                   |----------|--------------------|
                   |          | 目标代码生成器       |
                   |          ↓                    |
 综合部分           |     目标机器语言                |
 后端（back end）   |          |                    |
 与目标语言相关      |          |  机器相关代码优化器   |
                   |          ↓                    |
                   |      目标机器语言               |
                   |                               |
                   ---------------------------------
```


## <a id="content2">词法分析</a>

从左向右逐行扫描源程序的字符，识别出各个单词，转为为此法单元（token）形式。        
token：< 种别码，属性值 >     

| 单词类型 | 种别                                             | 种别码           |
|----------|------------------------------------------------|------------------|
| 1 关键字 | program, if, else, then, ...                   | 一词一码         |
| 2 标识符 | 变量名、数组名、记录名、过程名、...                            | 多词一码         |
| 3 常量   | 整型、浮点型、字符型、布尔型、...                             | 一型一码         |
| 4 运算符 | 算术（+ - * / ++ -）  <br>关系（> < == != >= <=）<br> 逻辑（& \| ~） | 一词一码 或 一型一码 |
| 5 界限符 | ；（）＝｛｝...                                      |                  |

```text
while(value!=100){num++;}
1 while < WHILE , - >
2 ( < SLP , - >
3 value < IDN , value >
4 != < NE , - >
5 100 < CONST , 100 >
6 ) < SRP , - >
7 { < LP , - >
8 num < IDN , num >
9 ++ < INC , - >
10 ; < SEMI , - >
11 } < RP , - >
```
```text
position = initial + rate * 60 ;
<id, position> <=> <id,initial> <+> <id, rate> <*> <num,60> <;>
```



----------
>  Nothing is impossible to a willing heart!