---
layout: post
title: "17、异常、智能指针"
date: 2019-12-03
description: "异常、智能指针"
tag: C++
---


<h6>版权声明：本文为博主原创文章，未经博主允许不得转载。</h6>








## 目录

* [异常](#content1)
* [自定义异常类型](#content2)
* [标准异常类型](#content3)
* [寄存器](#content4)
* [汇编指令](#content5)






<!-- ************************************************ -->
## <a id="content1"></a>异常

```
/**
 ◼ 编程过程中的常见错误类型
语法错误
逻辑错误
异常
......
 
异常是一种在程序运行过程中的发生的不好预测的错误（比如内存不够）
异常没有被处理，会导致程序终止
 */

// 为了增强可读性和方便团队协作，如果函数内部可能会抛出异常，建议函数声明一下异常类型


//int divide(int v1,int v2) throw(){//不抛出任何异常
//int divide(int v1,int v2) throw(const char*,int){//只抛出const char*,int类型的异常

int divide(int v1,int v2){//抛出任意可能的异常
    if (v2 == 0) {
        throw "不能除以0";
//        throw 0;
    }
    
    return v1/v2;
    
    
    /**
     throw异常后，会在当前函数中查找匹配的catch，找不到就
     终止当前函数代码，去上一层函数中查找。如果最终都找不
     到匹配的catch，整个程序就会终止
     
     但一般不会在抛出异常的函数里再捕获异常
     */
//    try {
//        if (v2 == 0) { throw "不能除以0";}
//        return v1/v2;
//    } catch (const char* exception) {
//        cout<<"exception0 = "<<exception<<endl;
//    }
//    return 0;
}


void divideTest(){
    try {
        //被检测的代码
        int a = 10;
        int b = 0;
        int c = divide(a, b);
        
        cout<<"c = "<<c<<endl;
    } catch (const char* exception) {
        //异常处理代码
        cout<<"exception = "<<exception<<endl;
    } catch(int exceptionCode){
        //异常处理代码
        cout<<"exceptionCode = "<<exceptionCode<<endl;
    }
}


void memoryTest() {
    cout << "1" << endl;

    // 如果内存不够，就会抛出异常(运行过程中抛出一个错误)
    try {
        for (int i = 0; i < 9999999; i++) {
            int *p = new int[9999999];
        }

        cout << "2" << endl;
    }
    catch (...) {
        //拦截所有异常类型
        cout << "发生了异常" << endl;
    }

    cout << "3" << endl;

    // delete[] p;
}

```



<!-- ************************************************ -->
## <a id="content2"></a>自定义异常类型

```
class Exception{
public:
    virtual string what() const= 0;
};

class DivideException:public Exception{
public:
    string what() const{
        return "不能除以0";
    };
};


int divideFun(int v1,int v2) throw(Exception){
    if (v2 == 0) {
        throw DivideException();
    }
    
    return v1/v2;
}


void customExceptionTest(){
    try {
        int a = 10;
        int b = 0;
        int c = divideFun(a, b);
    } catch (const Exception & exception) {
        cout<<"exception.what()"<<exception.what()<<endl;
    }
    
    cout<<"running..."<<endl;
}

```

<!-- ************************************************ -->
## <a id="content3"></a>标准异常类型

```
void biaoZhunExceptionTest(){
    
    try {
        int size = 9999999;
        for (int i=0; i<size; i++) {
            int* p = new int[size];
        }
    } catch (const std::bad_alloc& exception) {
        cout<<"exception.what() = "<<exception.what()<<endl;
    }
    
    cout<<"running..."<<endl;
}
```

<img src="/images/Cpp/cpp6.png" alt="img">



<!-- ************************************************ -->
## <a id="content4"></a>寄存器

<!-- ************************************************ -->
## <a id="content5"></a>汇编指令





----------
>  行者常至，为者常成！


