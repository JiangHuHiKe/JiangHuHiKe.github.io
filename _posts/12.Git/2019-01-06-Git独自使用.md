---
layout: post
title: "6、Git独自使用"
date: 2019-01-06
tag: Git
---   

- [参考：玩转Git三剑客](https://time.geekbang.org/course/intro/100021601)



## 目录
* [怎么删除不需要的分支](#content1)
* [修改commit的message](#content2)



<!-- ************************************************ -->
## <a id="content1"></a>怎么删除不需要的分支

假如我们现在有三个分支，如下
```
localhost:gitLearning LC$ git branch -av
  fix_readme b2b9461 delete branch test
* master     e37b35d Background change green
  temp       206309d detached test
localhost:gitLearning LC$ 
```

现在删除不需要的fix_readme分支，执行以下指令
```
localhost:gitLearning LC$ git branch -d fix_readme
error: The branch 'fix_readme' is not fully merged.
If you are sure you want to delete it, run 'git branch -D fix_readme'.
localhost:gitLearning LC$ 
```
我们发现Git报错，并不允许我们删除，     
原因是我们没有对这个分支合并，当我们删除这个分支后，在这个分支上提交的commit会丢失，      
Git为安全起见不允许我们删除未合并的分支。

但如果我们自己判定这个分支是安全的、无用的，我们可以按照Git的提示使用 -D 来删除这个分支

```
localhost:gitLearning LC$ git branch -D fix_readme
Deleted branch fix_readme (was b2b9461).
localhost:gitLearning LC$ git branch -av
* master e37b35d Background change green
  temp   206309d detached test
localhost:gitLearning LC$ 
```

<!-- ************************************************ -->
## <a id="content2"></a>修改commit的message

**一、修改最近commit的message**

我们先来看下最近commit的message

```
localhost:gitLearning LC$ git log -n 1
commit e37b35d92e17026a15ed06a65bff3eaf5ee7fda6 (HEAD -> master)
Author: LC <LC@lc.com>
Date:   Tue Jan 12 16:18:10 2021 +0800

    Background change green
```

我们使用如下命令来修改message

```
localhost:gitLearning LC$ git commit --amend

#当执行完上述命令后，会进入vim的编辑模式，修改信息后保存退出就会打印下面的信息

[master 90e928b] Background change from orange to  green
Date: Tue Jan 12 16:18:10 2021 +0800
1 file changed, 1 insertion(+), 1 deletion(-)
```

我们再来看下最近commit的message

```
localhost:gitLearning LC$ git log -n 1
commit 90e928b86fc1f3e5e90485b7c376fbb707320a11 (HEAD -> master)
Author: LC <LC@lc.com>
Date:   Tue Jan 12 16:18:10 2021 +0800

    Background change from orange to  green
localhost:gitLearning LC$ 
```

<span style="font-weight:bold">注意commit的hash值已经发生改变</span>


**二、修改老旧commit的message**

```
localhost:gitLearning LC$ git log --oneline
90e928b (HEAD -> master) Background change from orange to  green
f1df605 Add styles
fe9b9f9 Add index.html
8119c2d Add readme
f7eed8c Initial
```
我们使用下面的命令

```
localhost:gitLearning LC$ git rebase -i fe9b9f9

#当执行此名领后我们会进入vim模式
#对要修改的message使用reword命令，:wq退出后会进入另一个vim界面
#在该界面修改message消息，:wq退出后会打印下面信息

[detached HEAD 068de45] Add a tyles
 Date: Tue Jan 12 16:16:06 2021 +0800
 1 file changed, 50 insertions(+)
 create mode 100644 styles/style.css
Successfully rebased and updated refs/heads/master.

#从打印信息我们看到
#使用了头指针分离
#经历了两个阶段rebase 和 update 
```

<span style="font-weight:bold">现在是在独自使用Git的情况下，也就是说这是我们自己的分支并未共享出去，所以可以使用rebase命令</span>

再次查看下commit的message

```
localhost:gitLearning LC$ git log --oneline 
b056781 (HEAD -> master) Background change from orange to  green
068de45 Add a tyles
fe9b9f9 Add index.html
8119c2d Add readme
f7eed8c Initial
localhost:gitLearning LC$ 
```






----------
>  行者常至，为者常成！



