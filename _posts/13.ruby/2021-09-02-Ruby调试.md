---
layout: post
title: "Ruby调试"
date: 2021-09-02
description: ""
tag: Ruby
---



## 目录
* [Gem介绍](#content1)
* [调试环境配置](#content2)


<!-- ************************************************ -->
## <a id="content1">Gem介绍</a>

<img src="/images/project/14.png">

在 Ruby 中，gem install、bundle install 和 bundle exec 是与 RubyGems 和 Bundler 相关的三个不同的命令，用于管理和安装 Ruby 项目的依赖项。以下是它们的简要说明：

bunlder 是一个管理项目的管理工具，bundle是bundler的助手


#### **一、gem install:**

用于安装 RubyGems 中的 gem 包（库）。

示例：gem install gem_name

这个命令用于全局安装 gem，使其在系统中的任何地方和任何项目中都可用。

```shell
gem install debase
```

三方库的全局安装的目录：<br>
/Users/lxy/.rbenv/versions/3.2.2/lib/ruby/gems/3.2.0/gems

可以使用`gem info debug`查看安装三方库的信息


#### **二、bundle install:**

用于安装项目中指定版本的 gem 包，这些版本信息通常在项目的 Gemfile 文件中指定。

示例：在项目根目录执行 bundle install

这是一种更好的做法，特别是当您在一个项目中工作时。

这种方法有助于确保项目的依赖性是明确定义的，并且与其他项目独立。每个项目都可以有自己的 Gemfile.lock 文件，其中包含确切的 gem 版本，以确保每个项目都使用相同的依赖项版本。

在大多数情况下，推荐使用 Bundler（bundle install）来管理项目的依赖性，因为它提供了更好的隔离和版本控制。


可以在工程目录下使用命令查看安装的三方库
```shell
# 查看所有三方库
bundle list --paths

# 查看所有三方库
bundle show --paths

# 查看某一个三方库
bundle show debug --paths
```


要想安装到项目目录中可以使用
```
bundle install --path vendor/bundle
```

#### **三、bundle exec:**
用于在项目上下文中运行与项目关联的可执行文件或脚本，确保使用了项目中指定的 gem 版本。

示例：bundle exec ruby script.rb

这个命令会查找 Gemfile 中指定的 gem 版本，并将其添加到 $LOAD_PATH 中，以确保在执行脚本时使用正确的 gem 版本。

这有助于确保在不同项目中使用不同版本的 gem 时不会发生冲突。


<!-- ************************************************ -->
## <a id="content2">调试环境配置</a>

#### **一、老的方式**

下面这种调试方式在我的电脑上已经不能使用了，安装debase报错，并且没有找到解决的办法

<a href="https://www.jianshu.com/p/0f5a7a8293f5">ruby教程之VSCode 运行调试ruby</a>

#### **二、新的方式**

参考文章:<br>
<a href="https://blog.csdn.net/crasowas/article/details/129826515">CocoaPods - 源码调试环境搭建</a><br>
<a href="https://marketplace.visualstudio.com/items?itemName=KoichiSasada.vscode-rdbg">VSCode rdbg Ruby Debugger</a>

调试需要依赖的库改为debug,修改后重新执行 bundle install 命令安装依赖

**gemfile文件**
```ruby
# frozen_string_literal: true

source 'https://rubygems.org'
gem 'debug'
```

**目录结构**
<img src="/images/ruby/1.png">

**launch.json文件**
```
{
    "configurations": [
      {
        "name": "Debug", 
        "type": "rdbg",
        "request": "launch",
        "script": "${workspaceFolder}/bin/hello",
      }
    ]
}
```
调试器类型改为rdbg,program改为script

**vscode安装插件<br>**
在vscode中安装VSCode rdbg Ruby Debugger扩展


----------
>  行者常至，为者常成！


