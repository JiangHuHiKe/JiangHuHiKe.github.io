---
layout: post
title: "6.组件二进制(下)"
date: 2022-01-06
tag: 工程化
---


## 目录
- [制作二进制包步骤](#content1)   




<!-- ************************************************ -->
## <a id="content1">制作二进制包步骤</a>

cocoapods在执行命令的时候，比如 pod install    
内部会加载插件，同时会扫描gems目录下安装的gem，在每个gem里边会去查找cocoapods_plugin.rb文件    
如果存在就进行加载，就会作为cocoapods的三方插件        
<img src="/images/project/19.png">


如果想要我们自己的命令生效比如：pod cat build,需要将命令在这个文件内注册       
<img src="/images/project/18.png">


rake install:local 命令会将开发中的gem安装到本地进行调试    
<img src="/images/project/19.png">


```ruby
# 打印所有 gem 的最新版本的规范
Gem::Specification.latest_specs(true).map do |spec|
  puts spec.full_name
end


# 这一行的条件检查是在确保当前文件是直接被执行而不是被其他文件引用时才执行以下的代码块
# $PROGRAM_NAME 是 Ruby 程序当前运行的文件名
# __FILE__ 是当前文件的路径
if $PROGRAM_NAME == __FILE__

  # ENV['BUNDLE_GEMFILE'] 是一个环境变量，用于指定 Bundler 应该使用的 Gemfile 路径。
  ENV['BUNDLE_GEMFILE'] = File.expand_path('../Gemfile', __dir__)

  # require 'bundler/setup' 是加载 Bundler 的设置文件，它通常用于确保项目的 Gemfile 中列出的依赖被正确加载和设置。
  # 这一行的作用是确保在运行当前脚本时，Bundler 能够加载并设置项目的 gem 环境，以及正确解析和加载 Gemfile 中的依赖项。
  require 'bundler/setup'
end
```


什么是执行环境？

一个项目就是一个大的环境
比如iOS项目，这个项目里有很多属于这个项目的环境变量，比如frawork_search_path,也有属于这个项目的三方库比如afn。
xcode是一个idea，只是一个工具，我们通过这个工具可以查看项目的环境变量



----------
>  行者常至，为者常成！


